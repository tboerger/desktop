#!/usr/bin/env bash
set -eo pipefail

if [ -L $0 ]; then
    ROOT=$(cd $(dirname $(readlink -e $0))/..; pwd)
else
    ROOT=$(cd $(dirname $0)/..; pwd)
fi

if ! test -f "${ROOT}/env/bin/ansible-inventory"; then
    echo "Failed to detect inventory!"
    exit 1
fi

pushd "${ROOT}" >/dev/null
    "${ROOT}/env/bin/ansible-inventory" \
        --inventory-file "ansible/inventory.yml" \
        "$@"
popd >/dev/null
